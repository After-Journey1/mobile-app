"use strict";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(f){function g(e){return b.raw?e:encodeURIComponent(e)}function h(e,t){var o=b.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),b.json?JSON.parse(e):e}catch(e){}}(e);return f.isFunction(t)?t(o):o}var r=/\+/g,b=f.cookie=function(e,t,o){if(1<arguments.length&&!f.isFunction(t)){if("number"==typeof(o=f.extend({},b.defaults,o)).expires){var r=o.expires,n=o.expires=new Date;n.setMilliseconds(n.getMilliseconds()+864e5*r)}return document.cookie=[g(e),"=",(i=t,g(b.json?JSON.stringify(i):String(i))),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}for(var i,a,s=e?void 0:{},c=document.cookie?document.cookie.split("; "):[],l=0,u=c.length;l<u;l++){var d=c[l].split("="),p=(a=d.shift(),b.raw?a:decodeURIComponent(a)),m=d.join("=");if(e===p){s=h(m,t);break}e||void 0===(m=h(m))||(s[p]=m)}return s};b.defaults={},f.removeCookie=function(e,t){return f.cookie(e,"",f.extend({},t,{expires:-1})),!f.cookie(e)}}),$.ajaxSetup({type:"POST",data:{wTk:$.cookie("wTk")}}),function(t,s){function e(){}function c(e,t,o){this.uri_="https://"+t+"."+e+"/logstores/"+o+"/track?APIVersion=0.6.0",this.params_=new Array,this.httpRequest_=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:void 0}var o=new e;(+new Date).toString(),Math.floor(99999*Math.random()),o.extend=e.prototype.extend=s.extend,o.extend(o,{list:function(){var e,t=[];for(e in this)t.push(e);return t},isLogin:0<=document.cookie.indexOf("m_c")?1:0,updateIsLogin:function(){this.isLogin=0<=document.cookie.indexOf("m_c")?1:0},isMobile:/iPhone|iPod|mobile|ios|android|UCBrowser|MQQBrowser|BlackBerry|IEMobile/gi.test(navigator.userAgent.toLowerCase()),WbCustomerService:function(e){var t,o=s.cookie("m_c")?1:0,r=s.cookie("m_c"),n=s.cookie("b_n"),i=wb.extend({wbSellerid:"",customerServiceCode:"wx_1000_1515726307656"},e);window.NTKF_PARAM||(window.NTKF_PARAM=wb.extend({siteid:"wx_1000",sellerid:i.wbSellerid,settingid:i.customerServiceCode,uid:r||"",uname:n||"",isvip:o,userlevel:"0"},{itemid:wb.itemid||"",itemparam:wb.itemparam||"",orderid:wb.orderid||"",orderprice:wb.orderprice||""})),this.open=function(){wb.corsAjax({subWbDomain:wb.isMobile?"h5api":"gapi",url:"/pub/keywordAsk/",data:{keywordFlag:1,sessionId:s.cookie("wbiaoid"),sourceCode:0},complete:function(){window.NTKF&&NTKF.im_openInPageChat(i.customerServiceCode)},success:function(e){e.isCps&&(s("#kf-wbiaoId").length||s("body").append('<input type="hidden" value="'+s.cookie("wbiaoid")+'" id="kf-wbiaoId">'))}});try{(new wb.Logger).log2.send({event:"contactCustomService",eventPageType:wb.isMobile?"h5":"html"})}catch(e){console.log("logger-error",e.message)}},s("#__isLoadCustomerJs__").length||((t=document.createElement("script")).type="text/javascript",t.id="__isLoadCustomerJs__",t.src="//dl.wbiao.com/js/b2b/ntkfstat.js?siteid=wx_1000",t.charset="utf-8",document.body.appendChild(t))},globalCart:{add:function(e){function t(){var e=s.parseJSON(localStorage.getItem("cart"))||{};if(e[r.goodsCode]?e[r.goodsCode].quantity?e[r.goodsCode].quantity+=r.quantity:e[r.goodsCode].quantity=r.quantity:(e[r.goodsCode]={},e[r.goodsCode].quantity=r.quantity),r.salePrice&&(e[r.goodsCode].salePrice=r.salePrice),r.extendValue)for(o in r.extendValue)e[o]=r.extendValue[o];localStorage.setItem("cart",JSON.stringify(e)),r.success&&r.success({info:{error:0,message:"ok"}})}var o,r=s.extend({goodsCode:null,quantity:1,salePrice:null,extendValue:null,success:null},e);if(!r.goodsCode||Number(r.salePrice)<=0)return!1;0===wb.isLogin?t():1===wb.isLogin&&s.ajax({type:"post",url:"/pub/cart/add",dataType:"json",data:{cartModel:{goodsCode:r.goodsCode,quantity:r.quantity}},success:function(e){403===e.info.error?t():r.success&&r.success(e)}})},getQuantity:function(e){var r=s.extend({success:function(){}},e);0===wb.isLogin?function(){var e,t=0,o=s.parseJSON(localStorage.getItem("cart"));if(o){for(e in o)o[e].quantity&&(t+=o[e].quantity);r.success&&r.success(t)}else r.success&&r.success(0)}():1===wb.isLogin&&s.ajax({type:"POST",url:"/pub/cart/getQuantity",dataType:"json",data:{},success:function(e){0===e.info.error?r.success&&r.success(e.data):r.success&&r.success(0)}})},remove:function(e,t,o){if(!e)return!1;var r,n=s.extend({success:null},o);if(!t)return!1;0===wb.isLogin?((r=s.parseJSON(localStorage.getItem("cart")))[String(e)]&&(r[String(e)]=null,delete r[String(e)]),localStorage.setItem("cart",JSON.stringify(r)),n.success&&n.success({info:{error:0,message:"ok"},data:{currentData:r}})):1===wb.isLogin&&s.ajax({type:"post",url:"/pub/cart/delete",dataType:"json",data:{cartId:t||0},success:function(e){n.success&&n.success(e)}})},batchRemove:function(e,t){if(0===wb.isLogin)return!1;var o=s.extend({success:null},t);s.ajax({type:"POST",url:"/pub/cart/batchDelete",dataType:"json",data:{cartIdList:e},success:function(e){o.success&&o.success(e)}})}},globalCollect:{add:function(e,t,o){if(0===wb.isLogin||!e||!t)return!1;s.ajax({type:"post",dataType:"json",url:"/goods/collect/addCollect",data:{code:e,type:t},success:function(e){o&&o(e)}})}},setTrackData:function(e){if(!e||!s.isPlainObject(e))return!1;this.trackData?s.extend(this.trackData,e):this.trackData=s.extend({},e)},trackData:null,track:function(e){},Logger:function(){function t(e,t){var o=s.extend({},a,t,{eventTime:Math.round(+new Date/1e3)}),r=new c(i.host,i.project,e);for(var n in o)r.push(n,o[n]);r.logger()}var e=wb.tools.psl(),i={project:(e.domain&&e.domain.toLowerCase(),"wbiao-probe"),host:"cn-hangzhou.log.aliyuncs.com",logstore:"probe_log0"},o=/WBIAO_MARKET_([\d\._]+)\scom.wbiao.wbapp\s([\d\s\.]+)/.test(navigator.userAgent),r=/WBIAO_MARKET_([\d\.]+)_IOS_([\d_]+)/.test(navigator.userAgent),a={cid:s.cookie("wbiaoid"),memberCode:Number(s.cookie("m_c"))||0,station:"mall",version:"",cip:"",latitud:"",longitud:"",event:"",eventApp:o?"android":r?"iphone":wb.isMobile?"m":"pc",eventTime:"",eventPage:"",eventPageType:"",eventProps:void 0,userAgent:navigator.userAgent||""};this.log0={send:function(e){t("probe_log0",e)}},this.log1={send:function(e){t("probe_log1",e)}},this.log2={send:function(e){t("probe_log2",e)}}},info:function(){try{return JSON.parse(this.tools.base64decode(s.cookie("w_info")))}catch(e){return{}}},isIE:function(e){var t,o=navigator.userAgent.toLowerCase(),r=!1,n=document.createElement("b");if(n.innerHTML="\x3c!--[if IE "+e+"]><i></i><![endif]--\x3e",10<=e)try{t=null!==o.match(/msie ([\d.]+)/)?o.match(/msie ([\d.]+)/)[1]:o.match(/rv:([\d.]+)/)[1],r=parseInt(Number(t))===e}catch(e){r=!1}else r=1===n.getElementsByTagName("i").length;return r},tools:{getUrlParam:function(e){for(var t,o,r,n=window.location.search.substr(1).split("&"),i={},a=0;a<n.length;a++)0<(t=n[a].indexOf("="))&&(r=n[a].substring(0,t),o=n[a].substr(t+1),this[r]=o,i[r]=decodeURIComponent(o));return e?i[e]:i},setUrlParam:function(e,t,o){var r,n="",i=e.split("?"),a=i[0],s=i[1],c="";if(s)for(i=s.split("&"),r=0;r<i.length;r++)i[r].split("=")[0]!==t&&(n+=c+i[r],c="&");var l=c+""+t;return o&&(l+="="+o),a+"?"+n+l},delUrlParam:function(e,t){var o=e.substr(e.indexOf("?")+1),r=e.substr(0,e.indexOf("?")),n="",i=new Array;if(""!=o)for(var a=o.split("&"),s=0;s<a.length;s++){a[s].split("=")[0]!=t&&i.push(a[s])}return 0<i.length&&(n="?"+i.join("&")),r+n},base64encode:function(e){var t,o,r,n,i,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(r=e.length,o=0,t="";o<r;){if(n=255&e.charCodeAt(o++),o==r){t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4),t+="==";break}if(i=e.charCodeAt(o++),o==r){t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4|(240&i)>>4),t+=s.charAt((15&i)<<2),t+="=";break}a=e.charCodeAt(o++),t+=s.charAt(n>>2),t+=s.charAt((3&n)<<4|(240&i)>>4),t+=s.charAt((15&i)<<2|(192&a)>>6),t+=s.charAt(63&a)}return t},base64decode:function(e){var t,o,r,n,i,a,s,c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(a=e.length,i=0,s="";i<a;){for(;t=c[255&e.charCodeAt(i++)],i<a&&-1==t;);if(-1==t)break;for(;o=c[255&e.charCodeAt(i++)],i<a&&-1==o;);if(-1==o)break;s+=String.fromCharCode(t<<2|(48&o)>>4);do{if(61==(r=255&e.charCodeAt(i++)))return s;r=c[r]}while(i<a&&-1==r);if(-1==r)break;s+=String.fromCharCode((15&o)<<4|(60&r)>>2);do{if(61==(n=255&e.charCodeAt(i++)))return s;n=c[n]}while(i<a&&-1==n);if(-1==n)break;s+=String.fromCharCode((3&r)<<6|n)}return s},addCodeToDom:function(e){var t,o,r=s.extend({selElement:"head",labelName:null,insertOrNot:!0,externalFile:!1,insertCode:null,customAttr:{}},e),n=s("<"+r.labelName+"></"+r.labelName+">");if(!r.labelName||"script"!=r.labelName.toLowerCase()&&"img"!=r.labelName.toLowerCase()?r.labelName&&"link"==r.labelName.toLowerCase()&&(o="href",r.customAttr=Object.assign(r.customAttr,{rel:"stylesheet",charset:"utf-8"})):o="src",t=r.externalFile?n.attr(o,r.insertCode):n.text(r.insertCode),r.customAttr)for(var i in r.customAttr)t=t.attr(i,r.customAttr[i]);return r.onLoadSuccess&&(t=t.attr("onload",r.onLoadSuccess)),r.insertOrNot&&s(r.selElement).append(t),s(t)[0]},psl:function(){var e=document.domain.split("."),t={};try{t.domain=e.slice(-2).join(".")||null,0<e.slice(0,-2).length&&(t.subDomain=e.slice(0,-2).join(".")||null)}catch(e){t=null,console.log("psl error: ",e.message)}return t}},checkLogin:function(){if(!t.localStorage)return!1;s.cookie("m_c")&&t.localStorage.getItem("m_c")&&s.cookie("m_c")!==t.localStorage.getItem("m_c")&&s.ajax({type:"GET",url:"/pub/clean/loginInfo",dataType:"json",data:{mcInLocal:t.localStorage.getItem("m_c"),curUrl:location.href},cache:!1,success:function(e){0===e.info.error&&(o.isLogin=0,s.removeCookie("m_c"),s.removeCookie("b_n"),t.localStorage.removeItem("m_c"),o.isMobile||(wb.wbCustomerService&&(wb.wbCustomerService=new wb.WbCustomerService),s(".W_pt_top .pt_top_login").html('<a href="http://www.wb.node/member/login/" class="login_a">登录享优惠</a><a href="http://www.wb.node/member/register/" target="_blank" class="pt_register">注册</a>')))}})},loginToLocal:function(){if(!t.localStorage)return!1;s.cookie("m_c")&&localStorage.setItem("m_c",s.cookie("m_c"))},trackRecm:function(e){},corsAjax:function(e){var t={subWbDomain:"pu",cache:!1,dataType:"jsonp",jsonp:"callback"},o=this.tools.psl();s.extend(t,e);var r=[t.subWbDomain,o.domain].join("."),n=/^(\/\/)|^(http:\/\/)|^(https:\/\/)/.test(e.url)?e.url:["//",r,"/",e.url.replace(/^\//,"")].join(""),i=s.extend({},t,e,{url:n});s.ajax(i)},domains:function(){var e=this.tools.psl().domain,t={www:"www."+e,m:"m."+e,pu:"pu."+e,mu:"mu."+e};return"wbiaotest.cn"===e&&(t.www="w-test."+e,t.m="m-test."+e),t},urlRandomized:function(e,t){var o=Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2);return this.tools.setUrlParam(e,t||"nonStr",o)},fillUpUserModuleUrl:function(e,t){if(/^((\/\/)|http|https)/.test(e))return!1;var o="",r="",n={domain:this.tools.psl().domain,protocol:location.protocol,nonStr:!0,referrerDomain:null,referrerPath:null,referrer:null},i=s.extend({},n,t);return o+=(i.protocol?i.protocol.replace(/:$/,"")+":":"")+"//"+i.domain+"/"+e.replace(/^\//,""),!i.referrer&&i.referrerDomain&&i.referrerPath?(r+=location.protocol+"//"+i.referrerDomain+"/"+i.referrerPath.replace(/^\//,""),o=this.tools.setUrlParam(o,"referrer",encodeURIComponent(r))):i.referrer&&(o=this.tools.setUrlParam(o,"referrer",encodeURIComponent(i.referrer))),i.nonStr?this.urlRandomized(o):o},cleanWbiaoid:function(){try{if(1<document.cookie.match(/wbiaoid(?!\.sig)/g).length){for(var e=0;e<2;e++)s.cookie("wbiaoid","",{expires:-1}),s.cookie("wbiaoid.sig","",{expires:-1});s.ajax({type:"GET",url:"/pub/cleanwbiaoid",dataType:"json"})}}catch(e){}},CountDown:function(o){function r(e){return e<10?"0"+e:e}var n,i;this.start=function(){var t=setInterval(function(){n=+new Date,i=(o.end-n)/1e3;var e=Math.floor(i/60/60/24);i<0&&(i=0,clearInterval(t)),o.step&&o.step({d:0===e?0:e,h:r(Math.floor(i/60/60%24)),m:r(Math.floor(i/60%60)),s:r(Math.floor(i%60))})},1e3)}}}),c.prototype={push:function(e,t){if(e&&(0===t||t))if(s.isPlainObject(t))try{this.params_.push(e),this.params_.push(JSON.stringify(t))}catch(e){}else this.params_.push(e),this.params_.push(t)},logger:function(){for(var e=this.uri_,t=0;0<this.params_.length;)e+=t%2==0?"&"+encodeURIComponent(this.params_.shift()):"="+encodeURIComponent(this.params_.shift()),++t;try{this.httpRequest_.open("GET",e,!0),this.httpRequest_.send(null)}catch(t){window&&window.console&&"function"==typeof window.console.log&&(console.log("Failed to log to ali log service because of this exception:\n"+t),console.log("Failed log data:",e))}}},t.wbiao=t.wb=o}(window,jQuery);